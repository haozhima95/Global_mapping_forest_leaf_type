---
title: "tropical_count"
author: "Haozhi Ma"
date: "8/9/2022"
output: html_document
---

Load the dataset

```{R}

ds <- read.csv('C:\\Users\\haozh\\Desktop\\LL\\GFBI_data\\dswithcate_with4class_20220809.csv')

head(ds,100L)

ds <- ds[!is.na(ds$dbh),]

nrow(ds[is.na(ds$dbh),])
```

```{R}
ds[ds$tax_genus == 'Abies','leaftype'] = 'G'

ds[ds$tax_genus == 'Abies','leaftype_genus'] = 'G'

ds[ds$tax_genus == 'Abies', 'broad_evergreen'] = 0

ds[ds$tax_genus == 'Abies', 'needle_evergreen'] = 1

ds[ds$tax_genus == 'Abies', 'class'] = 2


```



```{R}
ds$tax_genus <- factor(ds$tax_genus, levels = levels(ds$accepted_bin))
ds <- ds[ds$accepted_bin != ds$tax_genus,]


str(ds)

head(ds,10L)

```





```{R}
library(dplyr)

```


```{R}

speciesds <- ds %>%
  group_by(accepted_bin) %>%
  dplyr::summarise(longitude = mean(LON),
            latitude = mean(LAT),
            wwfbiome = first(Biome)) %>%
  ungroup()

```


```{R}
head(speciesds, 50L)

```

```{R}

unique(speciesds$wwfbiome)

```




```{R}

nrow(speciesds[speciesds$wwfbiome == 'Tropical moist broadleaf forests' | speciesds$wwfbiome == 'Tropical coniferous forests' | speciesds$wwfbiome == 'Mangroves',])


nrow(speciesds[speciesds$wwfbiome == 'Temperate broadleaf forests' | speciesds$wwfbiome == 'Temperate conifer forests',])


nrow(speciesds[speciesds$wwfbiome == 'Boreal forests or taiga' | speciesds$wwfbiome == 'Montane grasslands' | speciesds$wwfbiome == 'Tundra',])

nrow(speciesds[speciesds$wwfbiome == 'Tropical dry broadleaf forests' | speciesds$wwfbiome == 'Tropical grasslands' | speciesds$wwfbiome == 'Temperate grasslands' | speciesds$wwfbiome == 'Mediterranean woodlands' | speciesds$wwfbiome == 'Xeric shrublands',])
```








