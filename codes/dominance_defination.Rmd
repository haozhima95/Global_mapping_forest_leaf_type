---
title: "define_dominance"
author: "Haozhi Ma"
date: "5/21/2021"
output: html_document
---


This script defines the dominance of one functional type of one plot.

Load the dataset

```{R}

dfwithinfo.temporal <- read.csv('C:\\Users\\haozh\\Desktop\\LL\\GFBI_data\\dswithinfo_temporal_20210521.csv')

head(dfwithinfo.temporal)

```
```{R}
library(nnet)

ll <- dfwithinfo.temporal[1,c(8,9,10,11)]
nll <- ll[ll>0]
nll
#names(ll)
#ll <- c(0,40,0,50)
ss <- nll[duplicated(nll)]
if(length(ss)){
  print('mixed')
} else{
  colnames(ll[match(nll[which.is.max(nll)], ll)])
}
```


Loop all the rows and choose the biggest value among the last four columns

```{R}
for(i in 1:nrow(dfwithinfo.temporal)){
  ll <- dfwithinfo.temporal[i, c(8,9,10,11)]
  nll <- ll[ll>0]
  ss <- nll[duplicated(nll)]
  #print(length(ss))
  #print(i)
  if(length(ss)){
    dfwithinfo.temporal[i, 12] <- 'mixed'
  } else{
    dfwithinfo.temporal[i,12] <- colnames(ll[match(nll[which.is.max(nll)], ll)])
  }
  if(i%%100 == 0){
    print(i)
  }
}
```



```{R}
head(dfwithinfo.temporal, 20L)
```

```{R}
write.csv(dfwithinfo.temporal, 'C:\\Users\\haozh\\Desktop\\LL\\GFBI_data\\dswithinfo_temporal_with_dominance_20210521.csv')

```



```{R}


```






